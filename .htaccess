RewriteEngine On
RewriteBase /pos

# Remove trailing slash
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)/$ /pos/$1 [R=301,L]

# Login route
RewriteRule ^login$ signin.php [L]

# Clean URLs - List pages
RewriteRule ^stores/list$ stores/store_list.php [L]
RewriteRule ^stores/add$ stores/add_store.php [L]
RewriteRule ^stores/edit$ stores/add_store.php [L]
RewriteRule ^stores/settings$ stores/settings.php [L]

RewriteRule ^currency/list$ currency/currency_list.php [L]
RewriteRule ^currency/add$ currency/add_currency.php [L]
RewriteRule ^currency/add/([0-9]+)$ currency/add_currency.php?id=$1 [L]
RewriteRule ^currency/edit/([0-9]+)$ currency/add_currency.php?id=$1 [L]

RewriteRule ^payment-methods/list$ payment_methods/payment_method_list.php [L]
RewriteRule ^payment-methods/add$ payment_methods/add_payment_method.php [L]
RewriteRule ^payment-methods/save$ payment_methods/save_payment_method.php [L]
RewriteRule ^payment-methods/edit/([0-9]+)$ payment_methods/add_payment_method.php?id=$1 [L]

# --- Giftcard Routes (added) ---
RewriteRule ^giftcard/list$ giftcard/giftcard_list.php [L]
RewriteRule ^giftcard/add$ giftcard/add_giftcard.php [L,QSA]
RewriteRule ^giftcard/save$ giftcard/save_giftcard.php [L,QSA]
RewriteRule ^giftcard/edit$ giftcard/add_giftcard.php [L,QSA]
RewriteRule ^giftcard/edit/([0-9]+)$ giftcard/add_giftcard.php?id=$1 [L]
RewriteRule ^giftcard/view/([0-9]+)$ giftcard/fetch_giftcard_modal.php?id=$1 [L]
RewriteRule ^giftcard/popup-list$ giftcard/giftcard_popup_list.php [L]
RewriteRule ^giftcard/topup$ giftcard/giftcard_popup_list.php [L]
RewriteRule ^giftcard/topup/([0-9]+)$ giftcard/fetch_giftcard_modal.php?id=$1 [L]

RewriteRule ^units/list$ units/unit_list.php [L]
RewriteRule ^units/edit/([0-9]+)$ units/add_unit.php?id=$1 [L]
RewriteRule ^units/add/([0-9]+)$ units/add_unit.php?id=$1 [L]
RewriteRule ^units/save$ units/save_unit.php [L]
RewriteRule ^units/add$ units/add_unit.php [L]


RewriteRule ^brands/list$ brands/brand_list.php [L]
RewriteRule ^brands/add$ brands/add_brand.php [L]
RewriteRule ^brands/edit/([0-9]+)$ brands/add_brand.php?id=$1 [L]

RewriteRule ^taxrates/list$ taxrates/taxrate_list.php [L]
RewriteRule ^taxrates/add$ taxrates/add_taxrate.php [L]
RewriteRule ^taxrates/edit/([0-9]+)$ taxrates/add_taxrate.php?id=$1 [L]
# RewriteRule ^taxrates/edit$ taxrates/add_taxrate.php [L]



# Boxes Routes
RewriteRule ^boxes/list$ boxes/box_list.php [L]
RewriteRule ^boxes/add$ boxes/add_box.php [L]
RewriteRule ^boxes/save$ boxes/save_box.php [L]
RewriteRule ^boxes/edit/([0-9]+)$ boxes/add_box.php?id=$1 [L]

# Categories Routes
RewriteRule ^categories/list$ categories/category_list.php [L]
RewriteRule ^categories/add$ categories/add_category.php [L]
RewriteRule ^categories/save$ categories/save_category.php [L]
RewriteRule ^categories/edit/([0-9]+)$ categories/add_category.php?id=$1 [L]

# --- Suppliers Routes (ADDED) ---
RewriteRule ^suppliers/list$ suppliers/supplier_list.php [L]
RewriteRule ^suppliers/add$ suppliers/add_supplier.php [L]
RewriteRule ^suppliers/save$ suppliers/save_supplier.php [L]
RewriteRule ^suppliers/edit/([0-9]+)$ suppliers/add_supplier.php?id=$1 [L]

# --- Products Routes (ADDED) ---
RewriteRule ^products/list$ products/product_list.php [L]
RewriteRule ^products/add$ products/add_product.php [L]
RewriteRule ^products/save$ products/save_product.php [L]
RewriteRule ^products/edit/([0-9]+)$ products/add_product.php?id=$1 [L]
RewriteRule ^products/stock_alert$ products/stock_alert.php [L]
RewriteRule ^products/stock-alert$ products/stock_alert.php [L]

# --- Purchases Routes (ADDED) ---
RewriteRule ^purchases/list$ purchases/purchase_list.php [L]
RewriteRule ^purchases/add$ purchases/add_purchase.php [L]
RewriteRule ^purchases/save$ purchases/save_purchase.php [L]
RewriteRule ^purchases/edit/([0-9]+)$ purchases/add_purchase.php?id=$1 [L]
RewriteRule ^purchases/import$ purchases/import_stock.php [L]
RewriteRule ^purchases/return-list$ purchases/return_list.php [L]
RewriteRule ^purchases/purchase-logs$ purchases/purchase_logs.php [L]
RewriteRule ^purchases/stock-import$ purchases/stock_import.php [L]

# --- POS Routes (ADDED) ---
RewriteRule ^pos/?$ pos/pos.php [L]
RewriteRule ^pos/save$ pos/save_sale.php [L]

# --- Quotations Routes (ADDED) ---
RewriteRule ^quotations/list$ quotations/quotation_list.php [L]
RewriteRule ^quotations/add$ quotations/add_quotation.php [L]
RewriteRule ^quotations/save_code\.php$ quotations/save_quotation.php [L]
RewriteRule ^quotations/edit/([0-9]+)$ quotations/add_quotation.php?id=$1 [L]

# --- Sell & Invoice Routes (Admin Pages) ---
RewriteRule ^sell/list$ admin/invoice.php [L]
RewriteRule ^sell/return$ admin/sell_return.php [L]
RewriteRule ^sell/return/view/([0-9]+)$ admin/sell_return_view.php?id=$1 [L]
RewriteRule ^sell/return/delete/([0-9]+)$ admin/sell_return_delete.php?id=$1 [L]
RewriteRule ^sell/log$ admin/sell_log.php [L]
RewriteRule ^sell/log/view/([0-9]+)$ admin/sell_log_view.php?id=$1 [L]

RewriteRule ^invoice/list$ admin/invoice.php [L]
RewriteRule ^invoice/view/([a-zA-Z0-9-]+)$ admin/invoice_view.php?id=$1 [L]

RewriteRule ^admin/edit/([0-9]+)$ admin/invoice_edit.php?id=$1 [L]
RewriteRule ^admin/delete$ admin/invoice_delete.php [L]
RewriteRule ^admin/delete/([0-9]+)$ admin/invoice_delete.php?id=$1 [L]


# --- Users & Groups Routes ---
RewriteRule ^users/add$ users/add_user.php [L]
RewriteRule ^users/edit/([0-9]+)$ users/add_user.php?id=$1 [L]
RewriteRule ^users/list$ users/user_list.php [L]
RewriteRule ^users/groups$ users/user_groups.php [L]
RewriteRule ^users/save_group$ users/save_user_group.php [L]
RewriteRule ^users/save$ users/save_user.php [L]
RewriteRule ^users/verify$ users/verify_email.php [L]
RewriteRule ^users/reset$ users/reset_password.php [L]


# --- Customers Routes (ADDED) ---
RewriteRule ^customers/list$ customers/customer_list.php [L]
RewriteRule ^customers/add$ customers/add_customer.php [L]
RewriteRule ^customers/save$ customers/save_customer.php [L]
RewriteRule ^customers/edit/([0-9]+)$ customers/add_customer.php?id=$1 [L]
 
# --- Installment Routes (ADDED) ---
RewriteRule ^installment/list$ installment/installment_list.php [L]
RewriteRule ^installment/view/([0-9]+)$ installment/view_installment.php?id=$1 [L]
RewriteRule ^installment/payments$ installment/payment_list.php [L]
RewriteRule ^installment/due_today$ installment/payment_list.php?filter=today [L]
RewriteRule ^installment/due_all$ installment/payment_list.php?filter=all [L]
RewriteRule ^installment/due_expired$ installment/payment_list.php?filter=expired [L]
RewriteRule ^installment/overview$ installment/overview.php [L]

# --- Reports Routes ---
RewriteRule ^reports/overview$ reports/report_overview.php [L,QSA]
RewriteRule ^reports/collection$ reports/collection_report.php [L,QSA]
RewriteRule ^reports/due-collection$ reports/due_collection_report.php [L,QSA]
RewriteRule ^reports/due-paid$ reports/due_paid_report.php [L,QSA]
RewriteRule ^reports/sell$ reports/sell_report.php [L,QSA]
RewriteRule ^reports/purchase$ reports/purchase_report.php [L,QSA]
RewriteRule ^reports/sell-payment$ reports/sell_payment_report.php [L,QSA]
RewriteRule ^reports/purchase-payment$ reports/purchase_payment_report.php [L,QSA]
RewriteRule ^reports/sell-tax$ reports/sell_tax_report.php [L,QSA]
RewriteRule ^reports/purchase-tax$ reports/purchase_tax_report.php [L,QSA]
RewriteRule ^reports/tax-overview$ reports/tax_overview_report.php [L,QSA]
RewriteRule ^reports/stock$ reports/stock_report.php [L,QSA]
RewriteRule ^reports/bank-transaction$ reports/bank_transaction_report.php [L,QSA]
RewriteRule ^reports/balance-sheet$ reports/balance_sheet.php [L,QSA]
RewriteRule ^reports/income-monthwise$ reports/income_monthwise_report.php [L,QSA]
RewriteRule ^reports/expense-monthwise$ reports/expense_monthwise_report.php [L,QSA]
RewriteRule ^reports/income-vs-expense$ reports/income_vs_expense_report.php [L,QSA]
RewriteRule ^reports/profit-loss$ reports/profit_loss_report.php [L,QSA]
RewriteRule ^reports/cashbook$ reports/cashbook_report.php [L,QSA]

# Default route
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^$ index.php [L]
